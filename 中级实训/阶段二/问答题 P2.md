# Stage2 - Part2：Bug Variations

**郑有为 19335286**

Set 2 The source code for the BoxBug class can be found in the boxBug directory.

1. 问题：What is the role of the instance variable sideLength?
   
   * 回答：`sideLength`记录 BoxBug 在一个方向最多能走的步数（也即正方形轨迹的边长 - 1）。当 BoxBug 在某个方向上直走满`sideLength`步（或不能再往前走时），他会向右转90度（两次 `turn()`），然后重置步数`steps`。
     
     ```java
     // @file: projects/boxBug/BoxBug.java
      // @line: 45-55
      if (steps < sideLength && canMove())
      {
          move();
          steps++;
      }
      else
      {
          turn();
          turn();
          steps = 0;
      }
     ```
2. 问题：What is the role of the instance variable steps?
   
   * 回答：`steps`用于纪录 BoxBug 在当前方向直走的步数，其取值范围是[0, sideLength]。
     
     ```java
     // @file: projects/boxBug/BoxBug.java
     // @line: 45-55
     if (steps < sideLength && canMove())
     {
         move();
         steps++;
     }
     else
     {
         turn();
         turn();
         steps = 0;
     }
     ```
3. 问题：Why is the turn method called twice when steps becomes equal to sideLength?
   
   * 回答：BoxBug 的轨迹是方形的，因此在每次转向中需要转90度，而一次`turn()`能使 BoxBug 向右转动45度，调用两次就能达到向右转90度的效果。
     
     ```java
     // @file: gridworld/actor/Bug.java
     // @line: 64
     setDirection(getDirection() + Location.HALF_RIGHT);
     
     // @file: gridworld/grid/Location.java
     // @line: 48
     public static final int HALF_RIGHT = 45;
     ```
4. 问题：Why can the move method be called in the BoxBug class when there is no move method in the BoxBug code?
   
   * 回答：因为 BoxBug 继承了 Bug 类， Bug作为基类，实现了`public void move()`，子类可以直接调用。
     
     ```java
     // @file: projects/boxBug/boxBug.java
     // @line: 25
     public class BoxBug extends Bug
     
     // @file: gridworld/actor/Bug.java
     // @line: 71
     public void move()
     ```
5. 问题：After a BoxBug is constructed, will the size of its square pattern always be the same? Why or why not?
   
   * 回答：是的，在构造函数构造 Boxbug后，用户无法修改 BoxBug 的 `sideLength`，BoxBug最终的轨迹会固定，围成的面积就不会改变。
     
     ```java
     // @file: projects/boxBug/boxBug.java
     // @line: 34
     public BoxBug(int length)
     ```
6. 问题：Can the path a BoxBug travels ever change? Why or why not? When will the value of steps be zero?
   
   * 回答：
     
     * BoxBug 的路径会改变，可能会该因网格中 Rock的产生和消失，还有其他 Bug 的产生，消失，移动而改变。（如果没有外界干扰，例如在一个空的UnboundedGrid中，路径则不会改变）
     * 当`canMove() == false`时，如网格越界，碰到Rock，Bug时，或当`steps == sideLength`时，即沿着当前方已经走`sideLength`步时重置`steps`为0。
     
     ```java
     // @file: projects/boxBug/BoxBug.java
     // @line: 45
     if (steps < sideLength && canMove())
     
     // @file: projects/boxBug/BoxBug.java
     // @line: 54
     steps = 0;
     
     // @file: girdworld/Actor/bug.java
     // @line: 101
     return (neighbor == null) || (neighbor instanceof Flower);
     ```